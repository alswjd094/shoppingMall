<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>main</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

</head>
<body>
<a href="/item/save" class="btn-success">상품등록</a>

<!--정렬 버튼나열-->
<div class="btn-group">
    <a href="/item/main" class="btn btn-default">최신순</a>
    <a th:href="@{/item/main(sort=itemPrice)}" class="btn btn-default">낮은가격순</a>
    <a th:href="@{/item/main(sort=itemSellCount)}" class="btn btn-default">판매순</a>
</div>




<div class="container">
    <table class="table table-striped table-hover text-center mt-5">
        <tr>
            <th>번호</th>
            <th>상품</th>
            <th>상품명</th>
            <th>가격</th>
            <th>등록 일자</th>
            <th>카테고리</th>
        </tr>
        <tr th:each="item: ${itemList}">
            <td th:text="${item.id}"></td>
            <td><a th:href="@{/item/(itemId=${item.id})}" th:text="${item.itemName}"></a></td>
            <td>
            <td th:if="${item.fileAttachedItem == 1}">
                <img th:src="@{|/upload/${item.storedFileNameItem.get(0)}}" alt="" width="50" height="50">
            </td>
            <td th:if="${item.fileAttachedItem == 0}">
               이미지 미등록
            </td>
            <td> <a th:href="@{/item/(itemId=${item.id})}" th:text="${item.itemName}"></a></td>
            <td th:text="${item.itemPrice}"></td>
            <td th:text="*{#temporals.format(item.itemCreatedDate,'yyyy-MM-dd HH:mm:ss')}"></td>
            <td th:text="${item.itemCategory}"></td>
        </tr>
    </table>

    <div class="container">
        <ul class="pagination justify-content-center">
            <li class="page-item">
                <!--첫페이지 요청 링크-->
                <a class="page-link" th:href="@{/item/main(page=1 ,sort=${sort})}">
                    <span>First</span>
                </a>
            </li>

            <li th:class="${itemList.first} ? 'disabled'" class="page-item">
                <!--boardList.first: isFirst()
                    boardList.number: getNumber()-->
                <a class="page-link" th:href="${itemList.first} ? '#' : @{/item/main(page=${itemList.number},sort=${sort})}">
                    <span><</span> <!-- < -->
                </a>
            </li>

            <!-- startPage ~ endPage 까지 숫자를 만들어주는 역할 -->
            <li th:each="page: ${#numbers.sequence(startPage, endPage)}"
                th:class="${page == itemList.number + 1} ? 'page-item active'" class="page-item">
                <a class="page-link" th:text="${page}" th:href="@{/item/main(page=${page},sort=${sort})}"></a>
            </li>

            <!-- 다음 페이지 요청
                현재 3페이지를 보고 있다면 다음 페이지는 4페이지임.
                getNumber() 값은 2임.
                따라서 4페이지를 보고 싶다면 getNumber()+2를 해야 컨트롤러에 4를 요청할 수 있음. -->
            <li th:class="${itemList.last} ? 'disabled'">
                <a class="page-link" th:href="${itemList.last} ? '#' : @{/item/main(page=${itemList.number + 2},sort=${sort})}">
                    <span>&gt;</span>
                </a>
            </li>

            <li class="page-item">
                <a class="page-link" th:href="@{/item/main(page=${itemList.totalPages},sort=${sort})}">
                    <span>Last</span>
                </a>
            </li>
        </ul>
    </div>
</div>
</body>
</html>